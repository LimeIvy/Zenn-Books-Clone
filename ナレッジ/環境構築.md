# DockerでのMySQL環境構築

**Dockerの起動**

```bash
docker-compose up -d  
```

```bash
docker start <CONTAINER IDまたはNAME>
```

**Dockerの停止**
```bash
docker stop <CONTAINER IDまたはNAME>
```

**コンテナ内のMySQLサーバーに接続**

```bash
docker exec -it (mysql-container) bash
```

- -it: 対話的に操作するためのオプションです。
- (mysql-container): 接続するコンテナの名前です。
- bash: コンテナ内で実行するシェルコマンドです。

```bash
mysql -u root -p
```

- -u root: MySQLサーバーに接続する際のユーザー名を指定します。
- -p: パスワードを入力するプロンプトが表示されることを指定します。このオプションを指定すると、コマンドを実行した後にパスワード入力が求められます。

## **コマンド**

**データベース一覧を見る**
```bash
show databases;
```

**データベースを新しく作成する**
```bash
create database (db_name);
```

**データベースを選択する**
```bash
use (db_name);
```

**テーブルを作成する**
```bash
create table (table_name) (id ○○, name ○○);
```
`今回のテーブル`
```bash
create table books( 
  id INT AUTO_INCREMENT, 
  title CHAR(70) NOT NULL, 
  auther CHAR(40) NOT NULL, 
  description VARCHAR(1000), 
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
  PRIMARY KEY (id) 
);

create table chapter(
   id INT AUTO_INCREMENT, 
   books_id INT NOT NULL, 
   name CHAR(70) NOT NULL, 
   content TEXT, 
   created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP, 
   updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 
   PRIMARY KEY (id), 
   FOREIGN KEY (books_id) REFERENCES books(id) 
);
```

**テーブル構造を表示する**
```bash
describe (table_name);
```

**カラム定義を変更する**
```bash
alter table (table_name) modify col_name column_definition;
```

`使用例`

```bash
alter table books modify title char(70) not null;
```

- tableを必須項目に修正

**カラムを追加**
```bash
alter table (table_name) add column (col_name) (data_type)
```
`使用例`

```bash
alter table (table_name) add column (col_name) (data_type)
```

**データを挿入**
```bash
insert into (table_name) (col_name,col_name) values
  ('value', value);
```